/**
 * This file contains configuration for graphql-code-generator.
 * graphql-code-generator is used to provide TypeScript support for your app's
 * GraphQL queries.
 *
 * @see https://www.graphql-code-generator.com/
 */

module.exports = {
	// URL to Gatsby's development GraphQL endpoint.
	schema: "http://localhost:8000/___graphql",

	// A list of files to check for GraphQL queries and fragments. In addition to
	// your project's files, Gatsby plugins in node_modules and any files in
	// .cache are included.
	documents: ["./src/**/*.{js,jsx,ts,tsx}", "./.cache/fragments/*.js"],

	// Settings for files generated by the `yarn gen` script.
	generates: {
		"./src/types.generated.ts": {
			plugins: [
				"typescript",
				"typescript-operations",
				{
					add: {
						content:
							"// This file was generated by GraphQL Code Generator. DO NOT EDIT.\n",
					},
				},
			],
			config: {
				skipTypename: true,
				maybeValue: "T | undefined",
				scalars: {
					Date: "string",
					JSON: "unknown",
				},
			},
		},
	},

	// Perform actions before and after `yarn gen` is executed.
	hooks: {
		afterOneFileWrite: [
			// This runs the generated file through Prettier to get nice formatting.
			"prettier --write",
		],
	},
};
